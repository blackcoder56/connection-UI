{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/jack/Desktop/GitProjects/connection-india/UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jack/Desktop/GitProjects/connection-india/UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/jack/Desktop/GitProjects/connection-india/UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{Container,Row,Col,Form,CardHeader,CardFooter,Input,Button}from'reactstrap';import{userContext}from'./../context/context';import\"react-toastify/dist/ReactToastify.css\";import{ToastContainer,toast}from'react-toastify';import Axios from'axios';import{Link,Redirect}from'react-router-dom';import{CircularProgress}from'@material-ui/core';export default function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLogin=_useState6[0],setIsLogin=_useState6[1];var context=useContext(userContext);var handleLoginFormSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setIsLogin(true);_context.prev=2;_context.next=5;return Axios({method:\"POST\",url:'http://localhost:5000/api/user/',data:{username:username,password:password}});case 5:res=_context.sent;if(res.status===200){localStorage.setItem('token',res.data.token);context.setToken(res.data.token);setIsLogin(false);}_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);toast('Connect to Internet',{type:\"error\",position:\"bottom-right\"});setIsLogin(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function handleLoginFormSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(ToastContainer,{}),context.token?/*#__PURE__*/_jsx(Redirect,{to:\"/home\"}):/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3}),/*#__PURE__*/_jsxs(Col,{md:6,className:\"form-signin login_pb margLogin\",children:[/*#__PURE__*/_jsx(CardHeader,{className:\"text-center mt-5\",children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"strong\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Login\"})})})})}),isLogin?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(CircularProgress,{})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Form,{onSubmit:handleLoginFormSubmit,children:[/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"Enter Your Username\",className:\"form-control mt-3\",autoFocus:true,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"Enter Your Password\",className:\"form-control mt-3\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(Input,{type:\"submit\",className:\"btn btn-dark mt-3\",value:\"Login\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:\"Or\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(Button,{className:\"btn btn-success\",children:\"Register\"})})]}),/*#__PURE__*/_jsx(CardFooter,{className:\"text-center\",children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"small\",{children:\"Secure Login\"})})})]}),/*#__PURE__*/_jsx(Col,{md:3})]})]});}","map":{"version":3,"sources":["/home/jack/Desktop/GitProjects/connection-india/UI/src/Routes/Login.js"],"names":["React","useContext","useState","Container","Row","Col","Form","CardHeader","CardFooter","Input","Button","userContext","ToastContainer","toast","Axios","Link","Redirect","CircularProgress","Login","username","setUsername","password","setPassword","isLogin","setIsLogin","context","handleLoginFormSubmit","e","preventDefault","method","url","data","res","status","localStorage","setItem","token","setToken","type","position","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react'\nimport {\n    Container, Row,Col,Form,CardHeader,CardFooter,Input, Button\n} from 'reactstrap'\nimport {userContext} from './../context/context'\nimport \"react-toastify/dist/ReactToastify.css\"\nimport { ToastContainer, toast } from 'react-toastify'\nimport Axios from 'axios';\nimport { Link, Redirect } from 'react-router-dom'\nimport { CircularProgress } from '@material-ui/core'\n\nexport default function Login() {\n\n    const [username,setUsername] = useState('');\n    const [password,setPassword] = useState('');\n    const [isLogin,setIsLogin] = useState(false);\n    let context = useContext(userContext);\n    const handleLoginFormSubmit = async(e) => {\n      e.preventDefault();\n      setIsLogin(true);\n      try {\n        let res = await Axios(\n          {\n            method:\"POST\",\n            url:'http://localhost:5000/api/user/',\n            data:{\n              username:username,\n              password:password\n            }\n          }\n        );\n        if(res.status === 200) {\n          localStorage.setItem('token',res.data.token);\n          context.setToken(res.data.token);\n          setIsLogin(false);\n        }\n\n      } catch (error) {\n        toast('Connect to Internet',{type:\"error\",position:\"bottom-right\"});\n        setIsLogin(false);\n      }\n      \n    }\n  return (\n    <Container>\n      <ToastContainer />\n      {context.token ? (\n        <Redirect to=\"/home\" />\n      ):(\n        <Row>\n                <Col md={3}></Col>\n                <Col md={6} className=\"form-signin login_pb margLogin\">\n                    <CardHeader className=\"text-center mt-5\">\n                        <label >\n                            <h3>\n                                <strong>\n                                    <b>\n                                       Login\n                                    </b>\n                                </strong>\n                            </h3>\n                        </label>\n                    </CardHeader>\n                    {isLogin ? (\n\n                      <div className=\"text-center\">\n                        <CircularProgress />\n                      </div>\n                    ) : (\n                      <>\n                      <Form onSubmit={handleLoginFormSubmit}>\n                        <Input \n                            type=\"text\"\n                            placeholder=\"Enter Your Username\"\n                            className=\"form-control mt-3\"\n                            autoFocus\n                            onChange={(e)=>setUsername(e.target.value)}\n                        />\n                        <Input \n                            type=\"password\"\n                            placeholder=\"Enter Your Password\"\n                            className=\"form-control mt-3\"\n                            onChange={(e)=>setPassword(e.target.value)}\n                        />\n                        <Input \n                            type=\"submit\"\n                            className=\"btn btn-dark mt-3\"\n                            value=\"Login\"\n                        />\n                    </Form>\n                    <div className=\"text-center\">\n                        Or\n                    </div>\n                    <Link to=\"/\"><Button className=\"btn btn-success\">Register</Button></Link>\n                    </>\n                    )}\n                    <CardFooter className=\"text-center\">\n                        <label>\n                            <small>\n                                Secure Login\n                            </small>\n                        </label>\n                    </CardFooter>\n                </Col>\n                <Col md={3}></Col>\n          </Row>\n      )}\n       \n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/jack/Desktop/GitProjects/connection-india/UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jack/Desktop/GitProjects/connection-india/UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/jack/Desktop/GitProjects/connection-india/UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{Container,Row,Col,Form,CardHeader,CardFooter,Input,Button}from'reactstrap';import{userContext}from'./../context/context';import\"react-toastify/dist/ReactToastify.css\";import{ToastContainer,toast}from'react-toastify';import Axios from'axios';import{Link,Redirect}from'react-router-dom';import{CircularProgress}from'@material-ui/core';export default function Reg(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLogin=_useState8[0],setIsLogin=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),validUsername=_useState10[0],setValidUsername=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),border=_useState12[0],setBorder=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),valid=_useState14[0],setValid=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),text=_useState16[0],setText=_useState16[1];var context=useContext(userContext);var handleLoginFormSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!validUsername){_context.next=16;break;}setIsLogin(true);_context.prev=3;_context.next=6;return Axios({method:\"POST\",url:'http://localhost:5000/api/user/new',data:{name:name,username:username,password:password}});case 6:res=_context.sent;if(res.status===201){console.log(res.data);localStorage.setItem('token',res.data.token);context.setToken(res.data.token);toast('Logged in',{type:\"success\"});setIsLogin(false);}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);toast('Please Connect to Internet',{type:\"error\",position:\"bottom-left\"});setIsLogin(false);case 14:_context.next=17;break;case 16:toast('Username Validation falied please select valid username',{type:\"error\",position:\"bottom-right\"});case 17:case\"end\":return _context.stop();}}},_callee,null,[[3,10]]);}));return function handleLoginFormSubmit(_x){return _ref.apply(this,arguments);};}();var handleUsernameExist=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(uname){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(uname.length>=6)){_context2.next=14;break;}setText(false);_context2.prev=2;_context2.next=5;return Axios({method:'GET',url:'http://localhost:5000/api/user/check/'+uname});case 5:res=_context2.sent;if(res.data.status===true){setUsername(uname);setValidUsername(true);setValid(true);setBorder(false);}else if(res.data.status===false){setValidUsername(false);setUsername('');setBorder(true);setValid(false);}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);toast('Please Connect to Internet',{type:\"error\",position:\"bottom-left\"});case 12:_context2.next=17;break;case 14:setBorder(true);setText(true);setUsername('');case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function handleUsernameExist(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(ToastContainer,{}),context.token?/*#__PURE__*/_jsx(Redirect,{to:\"/home\"}):/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3}),/*#__PURE__*/_jsxs(Col,{md:6,className:\"form-signin login_pb margLogin\",children:[/*#__PURE__*/_jsx(CardHeader,{className:\"text-center mt-5\",children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"strong\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Register\"})})})})}),isLogin?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(CircularProgress,{})}):/*#__PURE__*/_jsxs(Form,{onSubmit:handleLoginFormSubmit,children:[/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"Enter Your Name\",className:\"form-control mt-3\",autoFocus:true,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"Enter Your Username\",className:\"form-control mt-3\",style:{borderColor:border?'red':valid?'green':'skyblue'},onChange:function onChange(e){return handleUsernameExist(e.target.value);}}),text&&/*#__PURE__*/_jsx(\"small\",{style:{color:\"red\"},children:\"Invalid Username ( Username must have 6 character )\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"Enter Your Password\",className:\"form-control mt-3\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(Input,{type:\"submit\",className:\"btn btn-dark mt-3\",value:\"Register\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:\"Or\"}),/*#__PURE__*/_jsx(Link,{to:\"/log-nuser\",children:/*#__PURE__*/_jsx(Button,{className:\"btn btn-success from-control\",children:\"Login\"})}),/*#__PURE__*/_jsx(CardFooter,{className:\"text-center\",children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"small\",{children:\"Secure Login\"})})})]}),/*#__PURE__*/_jsx(Col,{md:3})]})]});}","map":{"version":3,"sources":["/home/jack/Desktop/GitProjects/connection-india/UI/src/Routes/Reg.js"],"names":["React","useContext","useState","Container","Row","Col","Form","CardHeader","CardFooter","Input","Button","userContext","ToastContainer","toast","Axios","Link","Redirect","CircularProgress","Reg","username","setUsername","password","setPassword","name","setName","isLogin","setIsLogin","validUsername","setValidUsername","border","setBorder","valid","setValid","text","setText","context","handleLoginFormSubmit","e","preventDefault","method","url","data","res","status","console","log","localStorage","setItem","token","setToken","type","position","handleUsernameExist","uname","length","target","value","borderColor","color"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react'\nimport {\n    Container, Row,Col,Form,CardHeader,CardFooter,Input, Button\n} from 'reactstrap'\nimport {userContext} from './../context/context'\nimport \"react-toastify/dist/ReactToastify.css\"\nimport { ToastContainer, toast } from 'react-toastify'\nimport Axios from 'axios';\nimport { Link, Redirect } from 'react-router-dom'\nimport { CircularProgress } from '@material-ui/core'\n\nexport default function Reg() {\n\n    const [username,setUsername] = useState('');\n    const [password,setPassword] = useState('');\n    const [name,setName] = useState('');\n    const [isLogin,setIsLogin] = useState(false);\n    const [validUsername,setValidUsername] = useState(false);\n    const [border,setBorder] = useState(false);\n    const [valid,setValid] = useState(false);\n    const [text,setText] = useState(false);\n    let context = useContext(userContext);\n    const handleLoginFormSubmit = async(e) => {\n      e.preventDefault();\n      \n      if(validUsername){\n        setIsLogin(true);\n        try {\n          let res = await Axios(\n            {\n              method:\"POST\",\n              url:'http://localhost:5000/api/user/new',\n              data:{\n                name:name,\n                username:username,\n                password:password\n              }\n            }\n          );\n          if(res.status === 201) {\n              console.log(res.data);\n            localStorage.setItem('token',res.data.token);\n            context.setToken(res.data.token);\n            toast('Logged in',{type:\"success\"});\n            setIsLogin(false);\n          }\n  \n        } catch (error) {\n          toast('Please Connect to Internet',{type:\"error\",position:\"bottom-left\"});\n          setIsLogin(false);\n        }\n      }else{\n        toast('Username Validation falied please select valid username',{type:\"error\",position:\"bottom-right\"});\n      }\n      \n    }\n\n    const handleUsernameExist = async(uname) =>{\n      if(uname.length >= 6){\n        setText(false);\n        try {\n          let res = await Axios({\n            method:'GET',\n            url:'http://localhost:5000/api/user/check/'+uname,\n          });\n          if(res.data.status === true){\n            setUsername(uname);\n            setValidUsername(true);\n            setValid(true);\n            setBorder(false);\n          }else if(res.data.status === false){\n            setValidUsername(false);\n            setUsername('');\n            setBorder(true);\n            setValid(false)\n          }\n        } catch (error) {\n          toast('Please Connect to Internet',{type:\"error\",position:\"bottom-left\"});\n        }\n      }else{\n        setBorder(true);\n        setText(true);\n        setUsername('');\n      }\n      \n    }\n  return (\n    <Container>\n      <ToastContainer />\n      {context.token ? (\n        <Redirect to=\"/home\" />\n      ):(\n        <Row>\n                <Col md={3}></Col>\n                <Col md={6} className=\"form-signin login_pb margLogin\">\n                    <CardHeader className=\"text-center mt-5\">\n                        <label >\n                            <h3>\n                                <strong>\n                                    <b>\n                                       Register\n                                    </b>\n                                </strong>\n                            </h3>\n                        </label>\n                    </CardHeader>\n                    {isLogin ? (\n                      <div className=\"text-center\">\n                        <CircularProgress />\n                      </div>\n                    ) : (\n                      <Form onSubmit={handleLoginFormSubmit}>\n                        <Input \n                            type=\"text\"\n                            placeholder=\"Enter Your Name\"\n                            className=\"form-control mt-3\"\n                            autoFocus\n                            onChange={(e)=>setName(e.target.value)}\n                        />\n                        <Input \n                            type=\"text\"\n                            placeholder=\"Enter Your Username\"\n                            className=\"form-control mt-3\"\n                            style={{borderColor: border ? 'red' : valid ? 'green': 'skyblue'}}\n                            onChange={(e)=>handleUsernameExist(e.target.value)}\n                        />\n                        {text && <small style={{color:\"red\"}}>Invalid Username ( Username must have 6 character )</small>}\n                        <Input \n                            type=\"password\"\n                            placeholder=\"Enter Your Password\"\n                            className=\"form-control mt-3\"\n                            onChange={(e)=>setPassword(e.target.value)}\n                        />\n                        <Input \n                            type=\"submit\"\n                            className=\"btn btn-dark mt-3\"\n                            value=\"Register\"\n                        />\n                    </Form>\n                    )}\n                    <div className=\"text-center\">\n                        Or\n                    </div>\n                    <Link to=\"/log-nuser\"><Button className=\"btn btn-success from-control\">Login</Button></Link>\n                    <CardFooter className=\"text-center\">\n                        <label>\n                            <small>\n                                Secure Login\n                            </small>\n                        </label>\n                    </CardFooter>\n                </Col>\n                <Col md={3}></Col>\n          </Row>\n      )}\n       \n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}